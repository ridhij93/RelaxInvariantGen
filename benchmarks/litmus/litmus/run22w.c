//
// This file was generated by the Retargetable Decompiler
// Website: https://retdec.com
// Copyright (c) 2019 Retargetable Decompiler <info@retdec.com>
//

#include <pthread.h>
#include <stdint.h>
#include <stdlib.h>

// ------------------- Function Prototypes --------------------

int64_t _ZNSt8ios_base4InitD1Ev2(void);
int64_t _ZSt4endlIcSt11char_traitsIcEERSt13basic_ostreamIT_T0_ES6_2(int64_t * a1);
int64_t entry_point(int64_t a1, int64_t a2, int64_t a3, int64_t a4);
int64_t function_400768(void);
int64_t function_4007a0(void);
int64_t function_4007b0(void);
int32_t function_4007c0(int64_t main, int32_t argc, char ** ubp_av, void (*init)(), void (*fini)(), void (*rtld_fini)());
int32_t function_4007d0(void (*func)(int64_t *), int64_t * arg, int64_t * dso_handle);
int64_t function_4007f0(int64_t * a1, char * a2);
int32_t function_400800(int32_t * newthread, int64_t * attr, int64_t * (*start_routine)(int64_t *), int64_t * arg);
int32_t function_400810(int32_t th, int64_t ** thread_return);
int64_t function_400820(int64_t * (*a1)(int64_t *));
int64_t function_400870(void);
int64_t function_4008b0(int64_t * a1);
int64_t function_4008f0(void);
int64_t function_400910(void);
int64_t function_400936(int64_t a1);
int64_t function_400954(int64_t a1);
int64_t function_400972(void);
int64_t function_400a2f(int64_t a1, int64_t a2);
int64_t function_400a6c(void);
int64_t function_400a90(int64_t a1, int64_t a2, int64_t a3);
int64_t function_400b00(void);
int64_t function_400b04(void);

// --------------------- Global Variables ---------------------

int64_t g1 = 0x400910; // 0x600de8
int64_t g2 = 0x4008f0; // 0x600df8
int64_t g3 = 0; // 0x600e00
int64_t g4 = 0; // 0x600ff8
int64_t g5 = 0; // 0x601070
int64_t g6 = 0; // 0x601080
char g7 = 0; // 0x601190
int32_t g8 = 0; // 0x601194
int32_t g9 = 0; // 0x601198
int64_t g10; // 0x60119c

// ------------------------ Functions -------------------------

// Address range: 0x400768 - 0x400782
int64_t function_400768(void) {
    // 0x400768
    int64_t result;
    if (g4 != 0) {
        // 0x400778
        result = function_4007a0();
    } else {
        result = 0;
    }
    // 0x40077d
    return result;
}

// Address range: 0x4007a0 - 0x4007a6
int64_t function_4007a0(void) {
    // 0x4007a0
    return __gmon_start__();
}

// Address range: 0x4007b0 - 0x4007b6
int64_t function_4007b0(void) {
    // 0x4007b0
    return _ZNSt8ios_base4InitC1Ev();
}

// Address range: 0x4007c0 - 0x4007c6
int32_t function_4007c0(int64_t main, int32_t argc, char ** ubp_av, void (*init)(), void (*fini)(), void (*rtld_fini)()) {
    // 0x4007c0
    return __libc_start_main(main, argc, ubp_av, init, fini, rtld_fini);
}

// Address range: 0x4007d0 - 0x4007d6
int32_t function_4007d0(void (*func)(int64_t *), int64_t * arg, int64_t * dso_handle) {
    // 0x4007d0
    return __cxa_atexit(func, arg, dso_handle);
}

// Address range: 0x4007e0 - 0x4007e6
// Demangled:     std::ios_base::Init::~Init() (.3)
int64_t _ZNSt8ios_base4InitD1Ev2(void) {
    // 0x4007e0
    return _ZNSt8ios_base4InitD1Ev();
}

// Address range: 0x4007f0 - 0x4007f6
int64_t function_4007f0(int64_t * a1, char * a2) {
    // 0x4007f0
    return _ZStlsISt11char_traitsIcEERSt13basic_ostreamIcT_ES5_PKc(a1, a2);
}

// Address range: 0x400800 - 0x400806
int32_t function_400800(int32_t * newthread, int64_t * attr, int64_t * (*start_routine)(int64_t *), int64_t * arg) {
    // 0x400800
    return pthread_create(newthread, attr, start_routine, arg);
}

// Address range: 0x400810 - 0x400816
int32_t function_400810(int32_t th, int64_t ** thread_return) {
    // 0x400810
    return pthread_join(th, thread_return);
}

// Address range: 0x400820 - 0x400826
int64_t function_400820(int64_t * (*a1)(int64_t *)) {
    // 0x400820
    return _ZNSolsEPFRSoS_E(a1);
}

// Address range: 0x400830 - 0x400836
// Demangled:     std::basic_ostream<char, std::char_traits<char> >& std::endl<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&) (.2)
int64_t _ZSt4endlIcSt11char_traitsIcEERSt13basic_ostreamIT_T0_ES6_2(int64_t * a1) {
    // 0x400830
    return _ZSt4endlIcSt11char_traitsIcEERSt13basic_ostreamIT_T0_ES6_(a1);
}

// Address range: 0x400840 - 0x40086a
int64_t entry_point(int64_t a1, int64_t a2, int64_t a3, int64_t a4) {
    // 0x400840
    int64_t v1;
    __libc_start_main(0x400972, (int32_t)a4, (char **)&v1, (void (*)())0x400a90, (void (*)())0x400b00, (void (*)())a3);
    __asm_hlt();
    // UNREACHABLE
}

// Address range: 0x400870 - 0x4008a2
int64_t function_400870(void) {
    // 0x400870
    return 7;
}

// Address range: 0x4008b0 - 0x4008ea
int64_t function_4008b0(int64_t * a1) {
    // 0x4008b0
    return 0;
}

// Address range: 0x4008f0 - 0x40090c
int64_t function_4008f0(void) {
    // 0x4008f0
    int64_t result;
    if (g7 == 0) {
        // 0x4008f9
        g7 = 1;
        result = function_400870();
    } else {
        int64_t v1;
        result = v1;
    }
    // 0x40090a
    return result;
}

// Address range: 0x400910 - 0x400936
int64_t function_400910(void) {
    // 0x400910
    return function_4008b0(&g3);
}

// Address range: 0x400936 - 0x400954
int64_t function_400936(int64_t a1) {
    // 0x400936
    g8 = 2;
    g9 = 1;
    int64_t result;
    return result;
}

// Address range: 0x400954 - 0x400972
int64_t function_400954(int64_t a1) {
    // 0x400954
    g9 = 3;
    g8 = 4;
    int64_t result;
    return result;
}

// Address range: 0x400972 - 0x400a2f
int64_t function_400972(void) {
    // 0x400972
    int64_t thread; // bp-24
    pthread_create((int32_t *)&thread, NULL, (int64_t * (*)(int64_t *))0x400936, NULL);
    int64_t thread2; // bp-16
    pthread_create((int32_t *)&thread2, NULL, (int64_t * (*)(int64_t *))0x400954, (int64_t *)1);
    pthread_join((int32_t)thread, NULL);
    pthread_join((int32_t)thread2, NULL);
    if (g8 != 2) {
        // 0x400a28
        return 0;
    }
    // 0x400a01
    if (g9 == 3) {
        int64_t v1 = _ZStlsISt11char_traitsIcEERSt13basic_ostreamIcT_ES5_PKc(&g6, "Assertion failed"); // 0x400a16
        _ZNSolsEPFRSoS_E((int64_t * (*)(int64_t *))v1);
    }
    // 0x400a28
    return 0;
}

// Address range: 0x400a2f - 0x400a6c
int64_t function_400a2f(int64_t a1, int64_t a2) {
    // 0x400a2f
    int64_t result;
    if ((int32_t)a1 != 1) {
        // 0x400a6a
        return result;
    }
    int64_t result2;
    if ((int32_t)a2 == 0xffff) {
        // 0x400a4c
        _ZNSt8ios_base4InitC1Ev();
        result2 = __cxa_atexit((void (*)(int64_t *))0x4007e0, &g10, &g5);
    } else {
        result2 = result;
    }
    // 0x400a6a
    return result2;
}

// Address range: 0x400a6c - 0x400a81
int64_t function_400a6c(void) {
    // 0x400a6c
    return function_400a2f(1, 0xffff);
}

// Address range: 0x400a90 - 0x400af5
int64_t function_400a90(int64_t a1, int64_t a2, int64_t a3) {
    int64_t result = function_400768(); // 0x400abe
    if ((int64_t)&g2 - (int64_t)&g1 >> 3 == 0) {
        // 0x400ae6
        return result;
    }
    int64_t v1 = 0;
    while (v1 + 1 != (int64_t)&g2 - (int64_t)&g1 >> 3) {
        // 0x400ad0
        v1++;
    }
    // 0x400ae6
    return result;
}

// Address range: 0x400b00 - 0x400b02
int64_t function_400b00(void) {
    // 0x400b00
    int64_t result;
    return result;
}

// Address range: 0x400b04 - 0x400b0d
int64_t function_400b04(void) {
    // 0x400b04
    int64_t result;
    return result;
}

// --------------- Dynamically Linked Functions ---------------

// int __cxa_atexit(void(* func)(void *), void * arg, void * dso_handle);
// int64_t __gmon_start__(void);
// int __libc_start_main(int *(main)(int, char **, char **), int argc, char ** ubp_av, void(* init)(void), void(* fini)(void), void(* rtld_fini)(void), void(* stack_end));
// int64_t _ZNSolsEPFRSoS_E(int64_t * (*a1)(int64_t *));
// int64_t _ZNSt8ios_base4InitC1Ev(void);
// int64_t _ZNSt8ios_base4InitD1Ev(void);
// int64_t _ZSt4endlIcSt11char_traitsIcEERSt13basic_ostreamIT_T0_ES6_(int64_t * a1);
// int64_t _ZStlsISt11char_traitsIcEERSt13basic_ostreamIcT_ES5_PKc(int64_t * a1, char * a2);
// int pthread_create(pthread_t * restrict newthread, const pthread_attr_t * restrict attr, void *(* start_routine)(void *), void * restrict arg);
// int pthread_join(pthread_t th, void ** thread_return);

// --------------------- Meta-Information ---------------------

// Detected compiler/packer: gcc (4.9.4)
// Detected language: C++
// Detected functions: 24
// Decompilation date: 2019-12-17 08:57:32
